{% extends "openbudgetapp/base.html" %}

{% block title %}Budget Report{% endblock %}
{% block content %}

<script type="text/javascript">
var chart;

$(document).ready(function() {
	makechart();
});
	
	
function makechart() {	chart = new Highcharts.Chart({
		chart: {
			renderTo: 'chart',
			plotBackgroundColor: null,
			plotBorderWidth: null,
			plotShadow: false
		},
		title: {
			text: '{{name}}'
		},
		tooltip: {
			formatter: function() {
				return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
			}
		},
		plotOptions: {
			pie: {
				allowPointSelect: true,
				cursor: 'pointer',
				dataLabels: {
					enabled: false,
					color: '#000000',
					connectorColor: '#000000',
					formatter: function() {
						return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
					},
				
				showInLegend: true
				
			}
		},
		series: [{
			type: 'pie',
			name: 'actual',
			data: [
				{% for label,val in data.items %}
				{% if for.last %}
					['{{label}}',  {{val}}]
				{% else %}
					['{{label}}',  {{val}}],
				{% endif %}
				{% endfor %}
			]
		}]
	});
};

</script>
<div id="chart" style="width: 700px;height: 500px"></div>

{% endblock %}